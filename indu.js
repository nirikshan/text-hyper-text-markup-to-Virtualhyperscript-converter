var x=document.getElementById("lol"),x1=[],y1={};x.onclick=function(){var t=document.getElementById("txy").value;-1!==t.indexOf(">")&&-1!==t.indexOf("<")&&compile(t)},compile=function(t){t=parser(lexical_analysis(t));document.getElementById("output").value=JSON.stringify(t,null,1)};var SELF_CLOSING_ELEMENTS="area base br command embed hr img input keygen link meta param source track wbr".split(" "),SVG_ELEMENTS="svg animate circle clippath cursor defs desc ellipse filter font-face foreignObject g glyph image line marker mask missing-glyph path pattern polygon polyline rect switch symbol text textpath tspan use view".split(" ");function get_tag(t){var e=t.str,r="/"==e.charAt(t.current+1);t.current+=r?2:1;var n=get_tag_name(t);get_tag_attributes(n,t),e="/"==e.charAt(t.current),t.current+=e?2:1,r&&(n.tag_closing=!0),e&&(n.tag_self_closing=!0)}function get_tag_name(t){for(var e=t.current,r=t.str.length,n=t.str,a="";e<r;){var c=n.charAt(e);if("/"==c||" "==c||">"==c)break;a+=c,e++}return t.current=e,e={type:"tag",value:a},t.tokens.push(e),e}function get_tag_attributes(t,e){function r(){c++,l=n.charAt(c),u=n.charAt(c+1)}for(var n=e.str,a=e.str.length,c=e.current,l=n.charAt(c),u=n.charAt(c+1),s={};c<a&&">"!=l&&("/"!=l||">"!=u);)if(" "==l)r();else{for(var i="",o=!1;c<a&&"="!==l;){if(" "==l||"/"==l&&">"==u){o=!0;break}i+=l,r()}r();var g={name:i,value:"",meta:{}};if(!o){for(o="","'"!=l&&'"'!=l||(o=l,r());c<a&&l!==o;)g.value+=l,r();r(),-1!==i.indexOf(":")&&(o=i.split(":"),g.name=o[0],g.meta.args=o[1])}s[i]=g}e.current=c,t.attributes=s}function get_text(t){var e=t.str,r=t.str.length,n=t.current,a=e.substring(n).search(/<\/?(?:[A-Za-z]+\w*)|\x3c!--/);-1==a?(t.tokens.push({type:"text",value:e.slice(n)}),t.current=r):0!==a&&(a+=n,t.tokens.push({type:"text",value:e.slice(n,a)}),t.current=a)}function get_comment(t){var e=t.current+4,r=t.str,n=t.str.length,a=r.indexOf("--\x3e",e);-1==a?(t.tokens.push({type:"comment",value:r.slice(e)}),t.current=n):(t.tokens.push({type:"comment",value:r.slice(e,a)}),t.current=a+3)}function lex_state(t){for(var e=t.str,r=t.str.length;t.current<r;)"<"!==e.charAt(t.current)?get_text(t):"\x3c!--"==e.substr(t.current,4)?get_comment(t):get_tag(t)}function parser(t){for(var e={type:"root",children:[]},r={current:0,tokens:t};r.current<t.length;){var n=getChild(r);n&&e.children.push(n)}return e}function getChild(t){var e=t.tokens[t.current],r=t.tokens[t.current-1],n=function(n){t.current+=null==n?1:n,e=t.tokens[t.current],r=t.tokens[t.current-1]};if("text"==e.type)return n(),r.value;if("comment"==e.type)return n(),null;if("tag"==e.type){var a=e.value,c=e.tag_self_closing,l=e.tag_closing,u=-1!==SVG_ELEMENTS.indexOf(a),s=-1!==SELF_CLOSING_ELEMENTS.indexOf(a)||1==c;if(c=createNode(a,e.attributes,[]),n(),u&&(c.is_svg=!0),!s){if(l)return console.error(" Cannot find a closing tag for element  : ",c.type),null;if(void 0!==e){for(;"tag"!==e.type||"tag"==e.type&&(null==e.tag_self_closing&&null==e.tag_closing||e.value!==a);)if(null!==(l=getChild(t))&&c.children.push(l),n(0),null==e){console.error('The element "'+c.type+'" was left unclosed');break}n()}}return c}n()}function createNode(t,e,r){return{type:t,props:e,children:r}}lexical_analysis=function(t){return lex_state(t={str:t,tokens:[],current:0}),t.tokens};